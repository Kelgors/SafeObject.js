"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),SafeObject=function(){function e(){_classCallCheck(this,e),this._clearAllInstanceProperties(e.SAFE_OBJECT_INITIALIZE),this._isSafeObject=!0}return _createClass(e,null,[{key:"include",value:function(t){if(t._isSafeObject)return t;["destroy","_getAncestors","_getAttributes","_clearAllInstanceProperties","_parsePropertyDescriptor"].forEach(function(r){"destroy"===r&&"function"==typeof t[r]?!function(){var n=t[r];t[r]=function(){e.prototype[r].call(this,arguments),n.apply(this,arguments)}}():t[r]=e.prototype[r]}),t._isSafeObject=!0;var r=t.constructor.INSTANCE_PROPERTIES;return r&&r.length&&t._clearAllInstanceProperties(e.SAFE_OBJECT_INITIALIZE),t}}]),_createClass(e,[{key:"destroy",value:function(){this._clearAllInstanceProperties(e.SAFE_OBJECT_DESTROY)}},{key:"_getAncestors",value:function(){for(var e=this.constructor,t=[];e=Object.getPrototypeOf(e.prototype)?Object.getPrototypeOf(e.prototype).constructor:null;)t.push(e||[]);return t}},{key:"_getAttributes",value:function(){for(var e=[this.constructor].concat(this._getAncestors()),t=[],r=0;r<e.length;r++)t.push.apply(t,e[r].INSTANCE_PROPERTIES);return t}},{key:"_clearAllInstanceProperties",value:function(t){for(var r=(this.constructor,this._getAttributes()),n=0;n<r.length;n++)try{var o=r[n],c=void 0,s=void 0;"string"==typeof o?(c=o,s=this._parsePropertyDescriptor()):Array.isArray(o)&&(c=o[0],s=this._parsePropertyDescriptor(o[1])),t===e.SAFE_OBJECT_INITIALIZE&&c&&s?Object.defineProperty(this,c,s):t===e.SAFE_OBJECT_DESTROY&&c&&(this[c]&&"function"==typeof this[c].destroy&&this[c].destroy(),this[c]=null)}catch(a){console.log("SafeObject#_clearAllInstanceProperties: "+a.toString())}}},{key:"_parsePropertyDescriptor",value:function(e){if(!e||e.constructor!==Object)return{writable:!0,configurable:!0,enumerable:!0,value:null};var t=e;return"value"in t||(t.value=null),"enumerable"in t||(t.enumerable=!0),"configurable"in t||(t.configurable=!0),"writable"in t||(t.writable=!0),t}}]),e}();SafeObject.SAFE_OBJECT_INITIALIZE=1,SafeObject.SAFE_OBJECT_DESTROY=2;